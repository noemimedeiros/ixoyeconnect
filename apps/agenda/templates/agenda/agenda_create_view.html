{% extends "core/dashboard.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block style %}
<link rel="stylesheet" href="{% static 'agenda/css/agenda.css' %}">
<link rel="stylesheet" href="{% static 'agenda/css/agenda_responsive.css' %}">
{% endblock style %}

{% block app_title %}
Criar Agenda
{% endblock app_title %}

{% block dashboard_actions %}{% endblock %}

{% block dashboard_content %}
<small>Preencha os dados abaixo</small>
<section class="agenda-form-section">
    <div>
        {% crispy form %}
    </div>
    <div>
        <div class="agenda-preview">
            <div class="mb-4"><small>Pré-Visualização</small></div>
            {% include "agenda/partials/card_agenda.html" %}
        </div>
    </div>
</section>

{% endblock dashboard_content %}

{% block _scripts %}
<script>
    function cardAgenda(){
        let titulo = $('#id_titulo').val();
        let icone = $('#id_icone').find('option:selected').data('icone');
        let descricao = $('#id_descricao').val();
        let dia_semana =  $('#id_dia_semana').find('option:selected').text();
        let hora = $('#id_hora').val();
        
        icone ? $('.div-icone-agenda i').prop('class', `fa-solid ${icone}`) : '';
        titulo ? $('.titulo-agenda').html(titulo) : '';
        (dia_semana || hora) ? $('.dia-hora-agenda').html(`${dia_semana} às ${hora}`) : '';
        descricao ? $('.descricao-agenda').html(descricao): '';
    }
    $('input, select, textarea').on('change input', () => cardAgenda());

</script>
{% endblock _scripts %}